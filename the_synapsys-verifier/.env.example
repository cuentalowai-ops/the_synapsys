# ===========================================
# SYNAPSYS EUDI WALLET RELYING PARTY CONFIG
# ===========================================
# Environment variables for production deployment
# Copy to .env and fill in actual values

# ============
# SERVER
# ============
PORT=3000
NODE_ENV=production
LOG_LEVEL=info

# ============
# DATABASE
# ============
# PostgreSQL connection
DB_HOST=localhost
DB_PORT=5432
DB_NAME=synapsys_verifier
DB_USER=postgres
DB_PASSWORD=change_me_in_production

# Connection pool settings
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# ============
# SECURITY
# ============
# NIS2 Article 21 - Encryption at-rest master key (CRITICAL)
# Requirements: 32+ random characters, rotate every 90 days
# Use secrets manager in production (AWS Secrets Manager, GCP Secret Manager, etc.)
ENCRYPTION_MASTER_KEY=your-secure-32-plus-character-master-key-change-in-production

# CORS: Comma-separated list of allowed origins
# Example: https://dashboard.synapsys.eu,https://app.synapsys.eu
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3001

# Rate limiting (override defaults if needed)
# RATE_LIMIT_WINDOW_MS=900000
# RATE_LIMIT_MAX_REQUESTS=100

# ============
# TRUST ANCHORS
# ============
# Enable/disable trust frameworks
ENABLE_EBSI=false
ENABLE_EUDI_LAUNCHPAD=false
ENABLE_MOCK_TRUST_ANCHORS=true

# EBSI DID Registry endpoint (if ENABLE_EBSI=true)
#EBSI_ENDPOINT=https://api-pilot.ebsi.eu/did-registry/v4/identifiers

# EUDI Launchpad endpoint (if ENABLE_EUDI_LAUNCHPAD=true)
#EUDI_LAUNCHPAD_ENDPOINT=https://launchpad.eu-digital-identity-wallet.eu

# Cache TTL for DID documents and trust anchors (seconds)
TRUST_CACHE_TTL=3600

# ============
# REDIS (Optional - for production)
# ============
# Enable Redis caching for sessions and rate limiting
ENABLE_REDIS=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ============
# AUDIT LOG
# ============
# Retention period for audit logs (years, eIDAS requirement: 3)
AUDIT_LOG_RETENTION_YEARS=3

# ============
# OPENID4VP
# ============
# Session expiration (minutes)
VP_SESSION_EXPIRATION_MINUTES=15

# Supported credential formats
# Comma-separated: jwt_vc,vc+sd-jwt,mso_mdoc
SUPPORTED_VC_FORMATS=jwt_vc,vc+sd-jwt

# Supported signature algorithms
# Comma-separated: RS256,ES256,ES256K,EdDSA
SUPPORTED_ALGORITHMS=RS256,ES256,ES256K,EdDSA

# ============
# MONITORING (Optional)
# ============
# Sentry DSN for error tracking
#SENTRY_DSN=https://xxx@sentry.io/xxx

# Prometheus metrics endpoint
#ENABLE_METRICS=true
#METRICS_PORT=9090

# ============
# DEPLOYMENT
# ============
# Cloud provider specific settings
#CLOUD_PROVIDER=gcp|aws|azure
#GCP_PROJECT_ID=
#AWS_REGION=
#AZURE_RESOURCE_GROUP=

# ===========
# NOTES
# ===========
# 1. NEVER commit .env file to git
# 2. Use secrets manager in production (AWS Secrets Manager, GCP Secret Manager, etc.)
# 3. Rotate DB_PASSWORD regularly (90 days recommended)
# 4. Keep audit logs for 3+ years (eIDAS 2.0 Art. 64 requirement)
# 5. Use TLS/SSL in production (configured at load balancer/reverse proxy level)

# ============
# GATACA WALLET
# ============
# Gataca Vouch OIDC Configuration
GATACA_IDP_HOST=https://vouch.gataca.io
GATACA_CLIENT_ID=your-gataca-client-id
GATACA_CLIENT_SECRET=your-gataca-client-secret
GATACA_REDIRECT_URI=http://localhost:3000/api/v1/gataca/callback

# ============
# IGRANT.IO WALLET
# ============
# iGrant.io OpenID4VP Configuration
IGRANT_AUTHORIZATION_ENDPOINT=https://api.igrant.io/v1/auth
IGRANT_TOKEN_ENDPOINT=https://api.igrant.io/v1/token
IGRANT_PRESENTATION_ENDPOINT=https://api.igrant.io/v1/present
IGRANT_CLIENT_ID=your-igrant-client-id
IGRANT_CLIENT_SECRET=your-igrant-client-secret

# ============
# MULTI-WALLET SETTINGS
# ============
# Wallet discovery cache TTL (seconds)
WALLET_DISCOVERY_CACHE_TTL=3600
# Wallet session timeout (seconds)
WALLET_SESSION_TIMEOUT=300
